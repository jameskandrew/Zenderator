{% for property in route.properties %}
    const FIELD_{{ property|transform_studly_to_screamingsnake }} = '{{ property }}';
{% endfor %}

    /**
     * @param $filter Filter instance
     * @param bool $hydrate
     * @return null|array|Models\{{ route.singular }}Model[]
     * @throws Exceptions\SDKException
     **/
    public function {{ route.function }}(Filter $filter = null,bool $hydrate = true)
    {
        /** @var $response \GuzzleHttp\Psr7\Response */
        $endpoint = "{{ route.pattern }}";
        $method = "{{ route.method }}";
        $headers = [
            'Filter' => $filter instanceof Filter ? $filter->getHeaderJson() : null ,
            'Accept' => 'application/json',
        ];

        $response = $this->request(
            $method,
            $endpoint,
            [
                'headers' => $headers
            ]
        );
        $body = $response->getBody()->getContents();
        if(json_decode($body) === null){
            throw new Exceptions\SDKException("Response from API ({$endpoint}) was not expected JSON: " . var_export($body, true));
        }
        $body = json_decode($body, true);

        if (strtolower($body['Status']) == strtolower('Okay')) {
            if(!isset($body['{{ route.plural }}'])){
                // @todo make exception less generic - MB
                throw new Exceptions\SDKException(
                    "Could not find element '{{ route.plural }}' in response from API.\n" .
                    "Endpoint: {$endpoint}\n" .
                    "Method: {$method}\n" .
                    "Available Keys were: ['" . implode("', '", array_keys($body)) . "'].\n"
                );
            }
            if($hydrate){
                return $this->hydrate($body['{{ route.plural }}']);
            } else {
                return $body['{{ route.plural }}'];
            }
        }
        return null;
    }

    /**
     * Get a single result with an optional filter.
     *
     * @param Filter|null $filter
     * @param bool $hydrate
     *
     * @throws Exceptions\SDKException
     *
     * @return Models\{{ route.singular }}Model|array|null
     */
    public function getFiltered(Filter $filter = null,bool $hydrate = true)
    {
        $singular = $this->list($filter->setLimit(1),$hydrate);

        return (is_array($singular) && count($singular) == 1)
            ? reset($singular)
            : null;
    }

    /**
     * Get many results with an optional filter
     *
     * @param Filter|null $filter
     * @param bool $hydrate
     *
     * @throws Exceptions\SDKException
     *
     * @return Models\{{ route.singular }}Model[]|array|null
     */
    public function getManyFiltered(Filter $filter = null,bool $hydrate = true) : ?array
    {
        $list = $this->list($filter,$hydrate);

        return (is_array($list) && count($list) > 0)
            ? $list
            : null;
    }
