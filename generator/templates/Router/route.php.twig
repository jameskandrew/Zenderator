<?php

// Router proper begins
$router = \Gone\AppCore\Router\Router::Instance()
    ->addRoute(
        \Gone\AppCore\Router\Route::Factory()
            ->setName('{{ class.name }} List')
            ->setCallback(\{{ class.namespace }}\Controllers\{{ class.name }}Controller::class . ':listRequest')
            ->setSDKClass('{{ class.name }}')
            ->setSDKFunction('list')
            ->setSDKTemplate('list')
            ->setRouterPattern('/v1/{{ controller_route }}')
            ->setHttpEndpoint('/v1/{{ controller_route }}')
            ->setHttpMethod('GET')
            ->setSingular(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_SINGULAR)
            ->setPlural(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_PLURAL)
            ->setAccess(DEFAULT_ROUTE_ACCESS_MODE)
            ->setPropertyData(\{{ class.namespace }}\Models\{{ class.name }}Model::getPropertyMeta())
            ->setSDKTableName(\{{ class.namespace }}\Models\{{ class.name }}Model::TABLE_NAME)
            ->setExampleEntityFindFunction($exampleExistingObjectFindFunction)
            ->setCallbackProperties([
                "Filter" => [
                    "name" => "Filter",
                    "default" => null,
                    "description" => "Filter object with rules to filter the list results by",
                    "in" => "header",
                    "isMandatory" => false,
                    "type" => \Gone\SDK\Common\Filters\Filter::class,
                ],
            ])
    )
    ->addRoute(
        \Gone\AppCore\Router\Route::Factory()
            ->setName('{{ class.name }} Create')
            ->setCallback(\{{ class.namespace }}\Controllers\{{ class.name }}Controller::class . ':createRequest')
            ->setSDKClass('{{ class.name }}')
            ->setSDKFunction('create')
            ->setSDKTemplate('create')
            ->setRouterPattern('/v1/{{ controller_route }}')
            ->setHttpEndpoint('/v1/{{ controller_route }}')
            ->setHttpMethod('PUT')
            ->setSingular(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_SINGULAR)
            ->setPlural(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_PLURAL)
            ->setPropertyData(\{{ class.namespace }}\Models\{{ class.name }}Model::getPropertyMeta())
            ->setSDKTableName(\{{ class.namespace }}\Models\{{ class.name }}Model::TABLE_NAME)
            ->setAccess(DEFAULT_ROUTE_ACCESS_MODE)
            ->setExampleEntityFindFunction($exampleExistingObjectFindFunction)
    )/*
    ->addRoute(
        \Gone\AppCore\Router\Route::Factory()
            ->setName('{{ class.name }} Create Bulk')
            ->setCallback(\{{ class.namespace }}\Controllers\{{ class.name }}Controller::class . ':createBulkRequest')
            ->setSDKClass('{{ class.name }}')
            ->setSDKFunction('createBulk')
            //->setSDKTemplate('create')
            ->setRouterPattern('/v1/{{ controller_route }}/bulk')
            ->setHttpEndpoint('/v1/{{ controller_route }}/bulk')
            ->setHttpMethod('PUT')
            ->setSingular(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_SINGULAR)
            ->setPlural(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_PLURAL)
            ->setPropertyData(\{{ class.namespace }}\Models\{{ class.name }}Model::getPropertyMeta())
            ->setSDKTableName(\{{ class.namespace }}\Models\{{ class.name }}Model::TABLE_NAME)
            ->setSDKResponseKey(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_PLURAL)
            ->setAccess(DEFAULT_ROUTE_ACCESS_MODE)
            ->setExampleEntityFindFunction($exampleExistingObjectFindFunction)
    )*/
    ->addRoute(
        \Gone\AppCore\Router\Route::Factory()
            ->setName('{{ class.name }} Get')
            ->setCallback(\{{ class.namespace }}\Controllers\{{ class.name }}Controller::class . ':getRequest')
            ->setSDKClass('{{ class.name }}')
            ->setSDKFunction('get')
            ->setSDKTemplate('get')
            ->setRouterPattern('/v1/{{ controller_route }}/{id}')
            ->setHttpEndpoint('/v1/{{ controller_route }}/id')
            ->setHttpMethod('GET')
            ->setSingular(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_SINGULAR)
            ->setPlural(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_PLURAL)
            ->setPropertyData(\{{ class.namespace }}\Models\{{ class.name }}Model::getPropertyMeta())
            ->setSDKTableName(\{{ class.namespace }}\Models\{{ class.name }}Model::TABLE_NAME)
            ->setAccess(DEFAULT_ROUTE_ACCESS_MODE)
            ->setExampleEntityFindFunction($exampleExistingObjectFindFunction)
            ->setCallbackProperties([
                "id" => [
                    "name" => "id",
                    "default" => null,
                    "description" => "ID of the object to be returned",
                    "in" => "path",
                    "isMandatory" => true,
                    "type" => "integer",
                ],
            ])
    )
    ->addRoute(
        \Gone\AppCore\Router\Route::Factory()
            ->setName('{{ class.name }} Delete')
            ->setCallback(\{{ class.namespace }}\Controllers\{{ class.name }}Controller::class . ':deleteRequest')
            ->setSDKClass('{{ class.name }}')
            ->setSDKFunction('delete')
            ->setSDKTemplate('delete')
            ->setRouterPattern('/v1/{{ controller_route }}/{id}')
            ->setHttpEndpoint('/v1/{{ controller_route }}/id')
            ->setHttpMethod('DELETE')
            ->setSingular(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_SINGULAR)
            ->setPlural(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_PLURAL)
            ->setPropertyData(\{{ class.namespace }}\Models\{{ class.name }}Model::getPropertyMeta())
            ->setSDKTableName(\{{ class.namespace }}\Models\{{ class.name }}Model::TABLE_NAME)
            ->setAccess(DEFAULT_ROUTE_ACCESS_MODE)
            ->setCallbackProperties([
                "id" => [
                    "name" => "id",
                    "default" => null,
                    "description" => "ID of the object to be deleted",
                    "in" => "path",
                    "isMandatory" => true,
                    "type" => "integer",
                ],
            ])
    )
    ->addRoute(
        \Gone\AppCore\Router\Route::Factory()
            ->setName('{{ class.name }} Update ID')
            ->setCallback(\{{ class.namespace }}\Controllers\{{ class.name }}Controller::class . ':updateIDRequest')
            ->setSDKClass('{{ class.name }}')
            ->setSDKFunction('updateID')
            //->setSDKTemplate('delete')
            ->setRouterPattern('/v1/{{ controller_route }}/{oldID}/updateID/{newID}')
            ->setHttpEndpoint('/v1/{{ controller_route }}/oldID/updateID/newID')
            ->setHttpMethod('POST')
            ->setSingular(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_SINGULAR)
            ->setPlural(\{{ class.namespace }}\Models\{{ class.name }}Model::NAME_PLURAL)
            ->setPropertyData(\{{ class.namespace }}\Models\{{ class.name }}Model::getPropertyMeta())
            ->setSDKTableName(\{{ class.namespace }}\Models\{{ class.name }}Model::TABLE_NAME)
            ->setAccess(DEFAULT_ROUTE_ACCESS_MODE)
            ->setCallbackProperties([
                "oldID" => [
                    "name" => "oldID",
                    "default" => null,
                    "description" => "ID of the object to be updated",
                    "in" => "path",
                    "isMandatory" => true,
                    "type" => "integer",
                ],
                "newID" => [
                    "name" => "newID",
                    "default" => null,
                    "description" => "new ID for the object to use",
                    "in" => "path",
                    "isMandatory" => true,
                    "type" => "integer",
                ],
            ])
    )
{% for related in related_objects %}
    ->addRoute(
        \Gone\AppCore\Router\Route::Factory()
            ->setName('{{ class.name }} Get {{ related.getRemoteModelName }} Model')
            ->setCallback(\{{ class.namespace }}\Controllers\{{ class.name }}Controller::class . ':{{ related.getBoundModelReferenceNameLC }}Request')
            ->setSDKClass('{{ class.name }}')
            ->setSDKFunction('get{{ related.getBoundModelReferenceName }}')
            ->setRouterPattern('/v1/{{ controller_route }}/{id}/{{ related.getBoundModelReferenceNameSC }}')
            ->setHttpEndpoint('/v1/{{ controller_route }}/id/{{ related.getBoundModelReferenceNameSC }}')
            ->setHttpMethod('GET')
            ->setSingular(\{{ class.namespace }}\Models\{{ related.getRemoteModelName }}::NAME_SINGULAR)
            ->setPlural(\{{ class.namespace }}\Models\{{ related.getRemoteModelName }}::NAME_PLURAL)
            ->setPropertyData(\{{ class.namespace }}\Models\{{ related.getRemoteModelName }}::getPropertyMeta())
            ->setSDKModelSafe(true)
{% if related.getRemoteClass not in skip_routes %}
            ->setSDKHydrate(true)
{% endif %}
            ->setAccess(DEFAULT_ROUTE_ACCESS_MODE)
            ->setCallbackProperties([
                "id" => [
                    "name" => "id",
                    "default" => null,
                    "description" => "ID of the base object to get the related model for",
                    "in" => "path",
                    "isMandatory" => true,
                    "type" => "integer",
                ],
            ])
    )
{% endfor %}
;


